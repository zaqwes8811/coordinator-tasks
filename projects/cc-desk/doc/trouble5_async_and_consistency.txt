http://stackoverflow.com/questions/28675745/node-js-how-to-enforce-data-consistency-with-async-waterfall

если есть RAM состояние и пишем в базу данных через актор.
- сделать копию состояния и откать в случае неудачи
  И все равно при копировании может возникнуть исключени.
  Даже просто при передачи данных. Но база то уже изменена!
- сперва изменить состояние, затем запустить операцию -
сразу проблема согласованности. Конечный автомат защищающий от изменений
типа мьютекса
